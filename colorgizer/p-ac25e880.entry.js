import{r as t,c as i,h as n,H as e,g as r}from"./p-ac1959e0.js";const o=class{constructor(n){t(this,n),this.brushSettingsEvent=i(this,"brushSettingsEvent",7),this.onSettingsChange=()=>{this.brushSettingsEvent.emit({width:this.widthEle.value,alpha:this.alphaEle.value})}}componentDidLoad(){this.widthEle=this.element.shadowRoot.querySelector("#brush-width"),this.alphaEle=this.element.shadowRoot.querySelector("#brush-alpha")}render(){return n(e,null,n("div",null,n("label",null,"Width"),n("input",{id:"brush-width",type:"range",step:"1",max:"50",min:"5",onInput:this.onSettingsChange,value:"5"})),n("div",null,n("label",null,"Transparency"),n("input",{id:"brush-alpha",type:"range",step:"0.1",max:"1",min:"0",onInput:this.onSettingsChange,value:"1"})))}get element(){return r(this)}};o.style="label{display:block;margin:10px 0;color:var(--primary-color)}input[type='range']{width:100%}:host{touch-action:none}";const s=class{constructor(n){t(this,n),this.cardIconClickEvent=i(this,"cardIconClickEvent",7),this.visible=!1,this.onClick=()=>{this.visible=!0,this.cardIconClickEvent.emit(this.cardTitle)}}closeEventLisener(){this.visible=!1}render(){return n("div",{class:"action-card"},n("pixobe-icon",{icon:this.icon,onClick:this.onClick,class:this.iconClass}),n("div",{class:this.visible?"card-content visible":"card-content"},n("div",{class:"header"},n("h3",null,this.cardTitle),n("pixobe-icon",{icon:"close-small",onClick:()=>this.visible=!1})),n("div",{class:"body"},n("slot",null))))}};s.style="h3{margin:0;padding:0}.action-card{display:block}.action-card .card-content{visibility:hidden;position:absolute;top:20%;transform:translateX(-50%);background-color:var(--card-bg-color);min-height:100px;width:250px;z-index:2;border-radius:4px;box-shadow:rgba(17, 12, 46, 0.55) 0px 48px 100px 0px}.visible{opacity:1;visibility:visible !important;left:50%;transform:translateY(20%);transition:visibility 0s linear 0s, opacity 0.5s 0s, transform 0.25s}.action-card .header{background-color:var(--card-header-color);display:grid;grid-template-columns:1fr auto;padding:10px;border-top-left-radius:4px;border-top-right-radius:4px;text-align:center}.action-card .body{padding:10px 10px;text-align:left}";const a=new class{constructor(){this.data={}}add(t,i){this.data[t]=i}get(t){return this.data[t]}},h=class{constructor(n){t(this,n),this.cardCloseEventEmitter=i(this,"cardCloseEventEmitter",7),this.endpoint="/colorgizer/email",this.sendEmail=async t=>{await fetch(this.endpoint,{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",referrerPolicy:"no-referrer",body:t}).finally((()=>{this.cardCloseEventEmitter.emit("Mail")}))},this.send=async()=>{const t=a.get("canvas"),i=this.emailId.value;t.toBlob((async t=>{const n=new FormData;n.append("file",t,"pixobe.png"),n.append("to",i),await this.sendEmail(n)}))}}componentDidLoad(){this.emailId=this.element.shadowRoot.getElementById("name")}render(){return n(e,null,n("div",{class:"email-action"},n("input",{type:"text",class:"form__input",id:"name",placeholder:"Email",required:!0}),n("button",{class:"btn",onClick:this.send},"SEND")))}get element(){return r(this)}};h.style=".form__input,.btn{padding:0.8rem 0.4rem;width:100%;border-radius:8px;box-sizing:border-box;outline-color:var(--secondary-color);border:1px solid #cacaca;margin:10px 0}.btn{background-color:var(--primary-color);color:var(--primary-text-color)}";const c=class{constructor(i){t(this,i),this.onChangeColor=t=>{this.currentColor=t.target.value,this.changeListener(this.currentColor)}}render(){return n(e,null,n("input",{type:"color",id:"color-inputs",onInput:this.onChangeColor,value:this.initialColor}))}};function l(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function u(t,i){var n=Object.create(t.prototype);for(var e in i)n[e]=i[e];return n}function d(){}c.style=":host{display:block;height:24px;width:24px}input[type='color']{-webkit-appearance:none;border:none;height:24px;width:24px;box-sizing:border-box;outline:none;box-shadow:none;border-radius:4px}input[type='color']::-webkit-color-swatch-wrapper{padding:0}input[type='color']::-webkit-color-swatch{border:none;border-radius:4px}input[type='color']::-moz-color-swatch{border:none;border-radius:4px}";var f=1/.7,p="\\s*([+-]?\\d+)\\s*",m="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",v="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b=/^#([0-9a-f]{3,8})$/,g=new RegExp("^rgb\\("+[p,p,p]+"\\)$"),w=new RegExp("^rgb\\("+[v,v,v]+"\\)$"),y=new RegExp("^rgba\\("+[p,p,p,m]+"\\)$"),x=new RegExp("^rgba\\("+[v,v,v,m]+"\\)$"),j=new RegExp("^hsl\\("+[m,v,v]+"\\)$"),k=new RegExp("^hsla\\("+[m,v,v,m]+"\\)$"),M={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function S(){return this.rgb().formatHex()}function E(){return this.rgb().formatRgb()}function N(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=b.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?C(i):3===n?new I(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?z(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?z(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=g.exec(t))?new I(i[1],i[2],i[3],1):(i=w.exec(t))?new I(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=y.exec(t))?z(i[1],i[2],i[3],i[4]):(i=x.exec(t))?z(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=j.exec(t))?L(i[1],i[2]/100,i[3]/100,1):(i=k.exec(t))?L(i[1],i[2]/100,i[3]/100,i[4]):M.hasOwnProperty(t)?C(M[t]):"transparent"===t?new I(NaN,NaN,NaN,0):null}function C(t){return new I(t>>16&255,t>>8&255,255&t,1)}function z(t,i,n,e){return e<=0&&(t=i=n=NaN),new I(t,i,n,e)}function D(t){return t instanceof d||(t=N(t)),t?new I((t=t.rgb()).r,t.g,t.b,t.opacity):new I}function I(t,i,n,e){this.r=+t,this.g=+i,this.b=+n,this.opacity=+e}function T(){return"#"+O(this.r)+O(this.g)+O(this.b)}function _(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function O(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function L(t,i,n,e){return e<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new P(t,i,n,e)}function A(t){if(t instanceof P)return new P(t.h,t.s,t.l,t.opacity);if(t instanceof d||(t=N(t)),!t)return new P;if(t instanceof P)return t;var i=(t=t.rgb()).r/255,n=t.g/255,e=t.b/255,r=Math.min(i,n,e),o=Math.max(i,n,e),s=NaN,a=o-r,h=(o+r)/2;return a?(s=i===o?(n-e)/a+6*(n<e):n===o?(e-i)/a+2:(i-n)/a+4,a/=h<.5?o+r:2-o-r,s*=60):a=h>0&&h<1?0:s,new P(s,a,h,t.opacity)}function P(t,i,n,e){this.h=+t,this.s=+i,this.l=+n,this.opacity=+e}function R(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}l(d,N,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:S,formatHex:S,formatHsl:function(){return A(this).formatHsl()},formatRgb:E,toString:E}),l(I,(function(t,i,n,e){return 1===arguments.length?D(t):new I(t,i,n,null==e?1:e)}),u(d,{brighter:function(t){return t=null==t?f:Math.pow(f,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:_,toString:_})),l(P,(function(t,i,n,e){return 1===arguments.length?A(t):new P(t,i,n,null==e?1:e)}),u(d,{brighter:function(t){return t=null==t?f:Math.pow(f,t),new P(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new P(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*i,r=2*n-e;return new I(R(t>=240?t-240:t+120,r,e),R(t,r,e),R(t<120?t+240:t-120,r,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var q,$,B=Math.PI/180,H=180/Math.PI,U=4/29,W=6/29,F=3*W*W;function J(t){if(t instanceof Y)return new Y(t.l,t.a,t.b,t.opacity);if(t instanceof tt)return it(t);t instanceof I||(t=D(t));var i,n,e=K(t.r),r=K(t.g),o=K(t.b),s=G((.2225045*e+.7168786*r+.0606169*o)/1);return e===r&&r===o?i=n=s:(i=G((.4360747*e+.3850649*r+.1430804*o)/.96422),n=G((.0139322*e+.0971045*r+.7141733*o)/.82521)),new Y(116*s-16,500*(i-s),200*(s-n),t.opacity)}function X(t,i,n,e){return 1===arguments.length?J(t):new Y(t,i,n,null==e?1:e)}function Y(t,i,n,e){this.l=+t,this.a=+i,this.b=+n,this.opacity=+e}function G(t){return t>.008856451679035631?Math.pow(t,1/3):t/F+U}function V(t){return t>W?t*t*t:F*(t-U)}function Z(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function K(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Q(t){if(t instanceof tt)return new tt(t.h,t.c,t.l,t.opacity);if(t instanceof Y||(t=J(t)),0===t.a&&0===t.b)return new tt(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var i=Math.atan2(t.b,t.a)*H;return new tt(i<0?i+360:i,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function tt(t,i,n,e){this.h=+t,this.c=+i,this.l=+n,this.opacity=+e}function it(t){if(isNaN(t.h))return new Y(t.l,0,0,t.opacity);var i=t.h*B;return new Y(t.l,Math.cos(i)*t.c,Math.sin(i)*t.c,t.opacity)}function nt(t){let i=t[0].toString(16),n=t[1].toString(16),e=t[2].toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==e.length&&(e="0"+e),"#"+i+n+e}function et(t,i,n=10){return e=nt(t),r=nt(i),e=X(e),r=X(r),o=e.a,s=e.b,a=r.a,h=r.b,Math.sqrt(Math.pow(e.l-r.l,2)+Math.pow(o-a,2)+Math.pow(s-h,2))<n;var e,r,o,s,a,h}l(Y,X,u(d,{brighter:function(t){return new Y(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Y(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,i=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new I(Z(3.1338561*(i=.96422*V(i))-1.6168667*(t=1*V(t))-.4906146*(n=.82521*V(n))),Z(-.9787684*i+1.9161415*t+.033454*n),Z(.0719453*i-.2289914*t+1.4052427*n),this.opacity)}})),l(tt,(function(t,i,n,e){return 1===arguments.length?Q(t):new tt(t,i,n,null==e?1:e)}),u(d,{brighter:function(t){return new tt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new tt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return it(this).rgb()}}));class rt{constructor(t){this.width=t.canvas.width,this.height=t.canvas.height,this.context=t}getColorAtPixel(t,i,n,e){const r=4*(e*i+n);return void 0===t[r+3]?null:[t[r],t[r+1],t[r+2],t[r+3]]}setColorAt(t,i,n,e,r){const o=4*(e*i+n);if(void 0===t[o+3])return null;t[o]=r[0],t[o+1]=r[1],t[o+2]=r[2],t[o+3]=r[3]}fill(t,i,n){const e=this.context.getImageData(0,0,this.width,this.height),r=e.data,o=this.getColorAtPixel(r,this.width,t,i);if(et(o,n,0))return;const s={},a=[];for(a.push([t,i]);a.length>0;){const[t,i]=a.pop(),e=t+","+i,h=this.getColorAtPixel(r,this.width,t,i);t>=0&&t<this.width&&i>=0&&i<this.height&&!(e in s)&&et(h,o)&&(s[e]=!0,this.setColorAt(r,this.width,t,i,n),a.push([t,i+1]),a.push([t+1,i]),a.push([t,i-1]),a.push([t-1,i]))}this.context.putImageData(e,0,0)}}!function(t){t.redraw="redraw",t.fill="fill",t.mouseup="mouseup",t.mousedown="mousedown",t.mouseenter="mouseenter",t.mouseleave="mouseleave"}(q||(q={}));class ot{constructor(t){const{canvas:i,lineWidth:n=10,strokeColor:e="#4d4d4d",disabled:r,showWarnings:o=!1,maxSnapshots:s=10,bucketToolTolerance:a=10,bucketMode:h=!0,onDrawingStopFn:c=(()=>{})}=t;this.requiredParam(t,"canvas"),this.canvas=i,this.context=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.maxSnapshots=s,this.snapshots=[],this.undos=[],this.positions=[],this.leftCanvasDrawing=!1,this.isDrawing=!1,this.isDrawingModeEnabled=!0,this.imageRestored=!1,this.lineWidth=n,this.strokeColor=e,this.bucketToolColor=e,this.bucketToolTolerance=a,this.isBucketToolEnabled=h,this.listenersList=["mouseDown","mouseMove","mouseLeave","mouseUp","touchStart","touchMove","touchEnd"],this.allowedEvents=this.getAllowedEvents(),this.redrawCounter=0,this.dispatchEventsOnceEvery=0,this.events={redrawEvent:new Event("cfd_redraw"),fillEvent:new Event("cfd_fill"),mouseUpEvent:new Event("cfd_mouseup"),mouseDownEvent:new Event("cfd_mousedown"),mouseEnterEvent:new Event("cfd_mouseenter"),mouseLeaveEvent:new Event("cfd_mouseleave"),touchStartEvent:new Event("cfd_touchstart"),touchEndEvent:new Event("cfd_touchend")},this.bindings={mouseDown:this.mouseDown.bind(this),mouseMove:this.mouseMove.bind(this),mouseLeave:this.mouseLeave.bind(this),mouseUp:this.mouseUp.bind(this),mouseUpDocument:this.mouseUpDocument.bind(this),touchStart:this.touchStart.bind(this),touchMove:this.touchMove.bind(this),touchEnd:this.touchEnd.bind(this)},this.touchIdentifier=void 0,this.previousX=void 0,this.previousY=void 0,this.showWarnings=o,this.storeSnapshot(),r||this.enableDrawingMode(),this.bucketTool=new rt(this.context),this.context.imageSmoothingEnabled=!0,this.onDrawingStopFn=c}requiredParam(t,i){if(!t||!t[i])throw new Error(`${i} is required`)}logWarning(...t){this.showWarnings&&console.warn(...t)}addListeners(){this.listenersList.forEach((t=>{this.canvas.addEventListener(t.toLowerCase(),this.bindings[t])})),document.addEventListener("mouseup",this.bindings.mouseUpDocument)}removeListeners(){this.listenersList.forEach((t=>{this.canvas.removeEventListener(t.toLowerCase(),this.bindings[t])})),document.removeEventListener("mouseup",this.bindings.mouseUpDocument)}getAllowedEvents(){const t=[];for(const i in q)t.push(i);return t}enableDrawingMode(){return this.isDrawingModeEnabled=!0,this.addListeners(),this.toggleCursor(),this.isDrawingModeEnabled}disableDrawingMode(){return this.isDrawingModeEnabled=!1,this.removeListeners(),this.toggleCursor(),this.isDrawingModeEnabled}mouseDown(t){0===t.button&&(this.drawPoint(t.offsetX,t.offsetY),t.stopPropagation())}mouseMove(t){this.drawLine(t.offsetX,t.offsetY,t)}touchStart(t){if(this.boundingRect=this.canvas.getBoundingClientRect(),t.changedTouches.length>0){const{identifier:i,clientX:n,clientY:e}=t.changedTouches[0],r=n-this.boundingRect.left,o=e-this.boundingRect.top;this.touchIdentifier=i,this.drawPoint(r,o)}}touchMove(t){const i=this.boundingRect;if(t.changedTouches.length>0){const{identifier:n,clientX:e,clientY:r}=t.touches[0],o=e-i.left,s=r-i.top;if(n!=this.touchIdentifier)return;this.previousX=o,this.previousY=s,this.drawLine(o,s,t)}}touchEnd(){this.handleEndDrawing(),this.canvas.dispatchEvent(this.events.touchEndEvent)}mouseUp(){this.handleEndDrawing(),this.canvas.dispatchEvent(this.events.mouseUpEvent)}mouseUpDocument(){this.leftCanvasDrawing=!1}mouseLeave(){this.isDrawing&&(this.leftCanvasDrawing=!0),this.isDrawing=!1,this.canvas.dispatchEvent(this.events.mouseLeaveEvent)}mouseEnter(){this.canvas.dispatchEvent(this.events.mouseEnterEvent)}drawPoint(t,i){if(this.isBucketToolEnabled){const n=function(t,i=255){let n=t;if(0===t.indexOf("#")&&(n=t.slice(1)),3===n.length&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),6!==n.length)throw new Error(`Invalid HEX color ${n}.`);return[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16),i]}(this.bucketToolColor);this.bucketTool.fill(t,i,n)}else this.isDrawing=!0,this.storeDrawing(t,i,!1),this.canvas.dispatchEvent(this.events.mouseDownEvent),this.handleDrawing()}drawLine(t,i,n){this.leftCanvasDrawing&&(this.leftCanvasDrawing=!1,n instanceof MouseEvent?this.mouseDown(n):n instanceof TouchEvent&&this.touchEnd()),this.isDrawing&&(this.storeDrawing(t,i,!0),this.handleDrawing(this.dispatchEventsOnceEvery))}handleDrawing(t){this.context.lineJoin="round",this.context.lineCap="round",[[...this.positions].pop()].forEach((t=>{t&&t[0]&&t[0].strokeColor&&(this.context.strokeStyle=t[0].strokeColor,this.context.lineWidth=t[0].lineWidth,this.draw(t))})),t?this.redrawCounter%t==0&&this.canvas.dispatchEvent(this.events.redrawEvent):this.canvas.dispatchEvent(this.events.redrawEvent),this.undos=[],this.redrawCounter+=1}handleEndDrawing(){this.isDrawing=!1,this.storeSnapshot(),this.onDrawingStopFn()}draw(t){t.forEach((({x:i,y:n,moving:e},r)=>{this.context.beginPath(),e&&r?this.context.moveTo(t[r-1].x,t[r-1].y):this.context.moveTo(i-1,n),r>1?this.context.bezierCurveTo(t[r-1].x,t[r-1].y,t[r].x,t[r].y,i,n):this.context.lineTo(i,n),this.context.closePath(),this.context.stroke()}))}toValidColor(t){if(Array.isArray(t)&&4===t.length)return t;if(Array.isArray(t)&&3===t.length){const i=[...t];return i.push(255),i}return this.logWarning("Color is not valid!\nIt must be an array with RGB values:  [0-255, 0-255, 0-255]"),[0,0,0,255]}rgbaFromArray(t){return`rgba(${t[0]},${t[1]},${t[2]},${t[3]})`}setDimensions(){this.canvas.height=this.height,this.canvas.width=this.width}toggleCursor(){this.canvas.style.cursor=this.isDrawingModeEnabled?"crosshair":"auto"}storeDrawing(t,i,n){n?this.positions[this.positions.length-1].push({x:t,y:i,moving:n,lineWidth:this.lineWidth,strokeColor:this.strokeColor,isBucket:!1}):this.positions.push([{x:t,y:i,isBucket:!1,moving:n,lineWidth:this.lineWidth,strokeColor:this.strokeColor}])}storeSnapshot(){const t=this.getCanvasSnapshot();this.snapshots.push(t),this.snapshots.length>this.maxSnapshots&&(this.snapshots=this.snapshots.splice(-Math.abs(this.maxSnapshots)))}getCanvasSnapshot(){return this.context.getImageData(0,0,this.width,this.height)}restoreCanvasSnapshot(t){this.context.putImageData(t,0,0)}on(t,i){const{event:n,counter:e}=t;this.requiredParam(t,"event"),this.allowedEvents.includes(n)?("redraw"===n&&e&&Number.isInteger(e)&&(this.dispatchEventsOnceEvery=e),this.canvas.addEventListener("cfd_"+n,(()=>i()))):this.logWarning(`This event is not allowed: ${n}`)}setLineWidth(t){this.lineWidth=t}setBackground(t,i=!0){const n=t;n&&(i&&(this.backgroundColor=n),this.context.fillStyle=n,this.context.fillRect(0,0,this.width,this.height))}setDrawingColor(t){this.configBucketTool({color:t}),this.setStrokeColor(t)}getDrawingColor(){return this.strokeColor}setStrokeColor(t){this.strokeColor=t}setBucketColor(t){this.configBucketTool({color:t})}configBucketTool(t){const{color:i=null,tolerance:n=null}=t;i&&(this.bucketToolColor=i),n&&n>0&&(this.bucketToolTolerance=n>100?100:n)}toggleBucketTool(){return this.isBucketToolEnabled=!this.isBucketToolEnabled}setBucketMode(t=!0){this.isBucketToolEnabled=t}toggleDrawingMode(){return this.isDrawingModeEnabled?this.disableDrawingMode():this.enableDrawingMode()}clear(){this.context.clearRect(0,0,this.width,this.height),this.positions=[],this.imageRestored=!1,this.backgroundColor&&this.setBackground(this.backgroundColor),this.handleEndDrawing()}save(){return this.canvas.toDataURL()}restore(t,i){const n=new Image;n.src=t,n.onload=()=>{this.imageRestored=!0,this.context.drawImage(n,0,0),"function"==typeof i&&i()}}undo(){const t=this.snapshots[this.snapshots.length-1],i=this.snapshots[this.snapshots.length-2];i?(this.restoreCanvasSnapshot(i),this.snapshots.pop(),this.undos.push(t),this.undos=this.undos.splice(-Math.abs(this.maxSnapshots)),this.imageRestored=!0):this.logWarning("There are no more undos left.")}redo(){if(this.undos.length>0){const t=this.undos.pop();t&&(this.restoreCanvasSnapshot(t),this.snapshots.push(t),this.snapshots=this.snapshots.splice(-Math.abs(this.maxSnapshots)))}else this.logWarning("There are no more redo left.")}}function st(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const at=st((function(t){var i;window,i=function(){return function(t){var i={};function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=i,n.d=function(t,i,e){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)n.d(e,r,function(i){return t[i]}.bind(null,r));return e},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=0)}({"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */function(t,i,n){n.r(i),n(/*! ./sass/index.scss */"./src/sass/index.scss");var e=n(/*! ./js/init */"./src/js/init.js").default.init;"undefined"!=typeof window&&(window.printJS=e),i.default=e},"./src/js/browser.js":
/*!***************************!*\
  !*** ./src/js/browser.js ***!
  \***************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e={isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!e.isIE()&&!!window.StyleMedia},isChrome:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!!t.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}};i.default=e},"./src/js/functions.js":
/*!*****************************!*\
  !*** ./src/js/functions.js ***!
  \*****************************/
/*! exports provided: addWrapper, capitalizePrint, collectStyles, addHeader, cleanUp, isRawHTML */function(t,i,n){n.r(i),n.d(i,"addWrapper",(function(){return s})),n.d(i,"capitalizePrint",(function(){return a})),n.d(i,"collectStyles",(function(){return h})),n.d(i,"addHeader",(function(){return l})),n.d(i,"cleanUp",(function(){return u})),n.d(i,"isRawHTML",(function(){return d}));var e=n(/*! ./modal */"./src/js/modal.js"),r=n(/*! ./browser */"./src/js/browser.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,i){return'<div style="font-family:'+i.font+" !important; font-size: "+i.font_size+' !important; width:100%;">'+t+"</div>"}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t,i){for(var n="",e=(document.defaultView||window).getComputedStyle(t,""),r=0;r<e.length;r++)(-1!==i.targetStyles.indexOf("*")||-1!==i.targetStyle.indexOf(e[r])||c(i.targetStyles,e[r]))&&e.getPropertyValue(e[r])&&(n+=e[r]+":"+e.getPropertyValue(e[r])+";");return n+"max-width: "+i.maxWidth+"px !important; font-size: "+i.font_size+" !important;"}function c(t,i){for(var n=0;n<t.length;n++)if("object"===o(i)&&-1!==i.indexOf(t[n]))return!0;return!1}function l(t,i){var n=document.createElement("div");if(d(i.header))n.innerHTML=i.header;else{var e=document.createElement("h1"),r=document.createTextNode(i.header);e.appendChild(r),e.setAttribute("style",i.headerStyle),n.appendChild(e)}t.insertBefore(n,t.childNodes[0])}function u(t){t.showModal&&e.default.close(),t.onLoadingEnd&&t.onLoadingEnd(),(t.showModal||t.onLoadingStart)&&window.URL.revokeObjectURL(t.printable);var i="mouseover";(r.default.isChrome()||r.default.isFirefox())&&(i="focus"),window.addEventListener(i,(function n(){window.removeEventListener(i,n),t.onPrintDialogClose();var e=document.getElementById(t.frameId);e&&e.remove()}))}function d(t){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(t)}},"./src/js/html.js":
/*!************************!*\
  !*** ./src/js/html.js ***!
  \************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e=n(/*! ./functions */"./src/js/functions.js"),r=n(/*! ./print */"./src/js/print.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,i){for(var n=t.cloneNode(),r=Array.prototype.slice.call(t.childNodes),o=0;o<r.length;o++)if(-1===i.ignoreElements.indexOf(r[o].id)){var a=s(r[o],i);n.appendChild(a)}switch(i.scanStyles&&1===t.nodeType&&n.setAttribute("style",Object(e.collectStyles)(t,i)),t.tagName){case"SELECT":n.value=t.value;break;case"CANVAS":n.getContext("2d").drawImage(t,0,0)}return n}i.default={print:function(t,i){var n,a="object"===o(n=t.printable)&&n&&(n instanceof HTMLElement||1===n.nodeType)?t.printable:document.getElementById(t.printable);a?(t.printableElement=s(a,t),t.header&&Object(e.addHeader)(t.printableElement,t),r.default.send(t,i)):window.console.error("Invalid HTML element id: "+t.printable)}}},"./src/js/image.js":
/*!*************************!*\
  !*** ./src/js/image.js ***!
  \*************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e=n(/*! ./functions */"./src/js/functions.js"),r=n(/*! ./print */"./src/js/print.js"),o=n(/*! ./browser */"./src/js/browser.js");i.default={print:function(t,i){t.printable.constructor!==Array&&(t.printable=[t.printable]),t.printableElement=document.createElement("div"),t.printable.forEach((function(i){var n=document.createElement("img");n.setAttribute("style",t.imageStyle),n.src=i,o.default.isFirefox()&&(n.src=n.src);var e=document.createElement("div");e.appendChild(n),t.printableElement.appendChild(e)})),t.header&&Object(e.addHeader)(t.printableElement,t),r.default.send(t,i)}}},"./src/js/init.js":
/*!************************!*\
  !*** ./src/js/init.js ***!
  \************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e=n(/*! ./browser */"./src/js/browser.js"),r=n(/*! ./modal */"./src/js/modal.js"),o=n(/*! ./pdf */"./src/js/pdf.js"),s=n(/*! ./html */"./src/js/html.js"),a=n(/*! ./raw-html */"./src/js/raw-html.js"),h=n(/*! ./image */"./src/js/image.js"),c=n(/*! ./json */"./src/js/json.js");function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=["pdf","html","image","json","raw-html"];i.default={init:function(){var t={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(t){throw t},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},i=arguments[0];if(void 0===i)throw new Error("printJS expects at least 1 attribute.");switch(l(i)){case"string":t.printable=encodeURI(i),t.fallbackPrintable=t.printable,t.type=arguments[1]||t.type;break;case"object":for(var n in t.printable=i.printable,t.fallbackPrintable=void 0!==i.fallbackPrintable?i.fallbackPrintable:t.printable,t.fallbackPrintable=t.base64?"data:application/pdf;base64,".concat(t.fallbackPrintable):t.fallbackPrintable,t)"printable"!==n&&"fallbackPrintable"!==n&&(t[n]=void 0!==i[n]?i[n]:t[n]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+l(i))}if(!t.printable)throw new Error("Missing printable information.");if(!t.type||"string"!=typeof t.type||-1===u.indexOf(t.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");t.showModal&&r.default.show(t),t.onLoadingStart&&t.onLoadingStart();var d=document.getElementById(t.frameId);d&&d.parentNode.removeChild(d);var f=document.createElement("iframe");switch(e.default.isFirefox()?f.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):f.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),f.setAttribute("id",t.frameId),"pdf"!==t.type&&(f.srcdoc="<html><head><title>"+t.documentTitle+"</title>",t.css&&(Array.isArray(t.css)||(t.css=[t.css]),t.css.forEach((function(t){f.srcdoc+='<link rel="stylesheet" href="'+t+'">'}))),f.srcdoc+="</head><body></body></html>"),t.type){case"pdf":if(e.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var p=window.open(t.fallbackPrintable,"_blank");p.focus(),t.onIncompatibleBrowser()}catch(i){t.onError(i)}finally{t.showModal&&r.default.close(),t.onLoadingEnd&&t.onLoadingEnd()}else o.default.print(t,f);break;case"image":h.default.print(t,f);break;case"html":s.default.print(t,f);break;case"raw-html":a.default.print(t,f);break;case"json":c.default.print(t,f)}}}},"./src/js/json.js":
/*!************************!*\
  !*** ./src/js/json.js ***!
  \************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e=n(/*! ./functions */"./src/js/functions.js"),r=n(/*! ./print */"./src/js/print.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.default={print:function(t,i){if("object"!==o(t.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof t.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!t.properties||!Array.isArray(t.properties))throw new Error("Invalid properties array for your JSON data.");t.properties=t.properties.map((function(i){return{field:"object"===o(i)?i.field:i,displayName:"object"===o(i)?i.displayName:i,columnSize:"object"===o(i)&&i.columnSize?i.columnSize+";":100/t.properties.length+"%;"}})),t.printableElement=document.createElement("div"),t.header&&Object(e.addHeader)(t.printableElement,t),t.printableElement.innerHTML+=function(t){var i=t.printable,n=t.properties,r='<table style="border-collapse: collapse; width: 100%;">';t.repeatTableHeader&&(r+="<thead>"),r+="<tr>";for(var o=0;o<n.length;o++)r+='<th style="width:'+n[o].columnSize+";"+t.gridHeaderStyle+'">'+Object(e.capitalizePrint)(n[o].displayName)+"</th>";r+="</tr>",t.repeatTableHeader&&(r+="</thead>"),r+="<tbody>";for(var s=0;s<i.length;s++){r+="<tr>";for(var a=0;a<n.length;a++){var h=i[s],c=n[a].field.split(".");if(c.length>1)for(var l=0;l<c.length;l++)h=h[c[l]];else h=h[n[a].field];r+='<td style="width:'+n[a].columnSize+t.gridStyle+'">'+h+"</td>"}r+="</tr>"}return r+"</tbody></table>"}(t),r.default.send(t,i)}}},"./src/js/modal.js":
/*!*************************!*\
  !*** ./src/js/modal.js ***!
  \*************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e={show:function(t){var i=document.createElement("div");i.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),i.setAttribute("id","printJS-Modal");var n=document.createElement("div");n.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var r=document.createElement("div");r.setAttribute("class","printClose"),r.setAttribute("id","printClose"),n.appendChild(r);var o=document.createElement("span");o.setAttribute("class","printSpinner"),n.appendChild(o);var s=document.createTextNode(t.modalMessage);n.appendChild(s),i.appendChild(n),document.getElementsByTagName("body")[0].appendChild(i),document.getElementById("printClose").addEventListener("click",(function(){e.close()}))},close:function(){var t=document.getElementById("printJS-Modal");t&&t.parentNode.removeChild(t)}};i.default=e},"./src/js/pdf.js":
/*!***********************!*\
  !*** ./src/js/pdf.js ***!
  \***********************/
/*! exports provided: default */function(t,i,n){n.r(i);var e=n(/*! ./print */"./src/js/print.js"),r=n(/*! ./functions */"./src/js/functions.js");function o(t,i,n){var r=new window.Blob([n],{type:"application/pdf"});r=window.URL.createObjectURL(r),i.setAttribute("src",r),e.default.send(t,i)}i.default={print:function(t,i){if(t.base64){var n=Uint8Array.from(atob(t.printable),(function(t){return t.charCodeAt(0)}));o(t,i,n)}else{t.printable=/^(blob|http|\/\/)/i.test(t.printable)?t.printable:window.location.origin+("/"!==t.printable.charAt(0)?"/"+t.printable:t.printable);var e=new window.XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("error",(function(){Object(r.cleanUp)(t),t.onError(e.statusText,e)})),e.addEventListener("load",(function(){if(-1===[200,201].indexOf(e.status))return Object(r.cleanUp)(t),void t.onError(e.statusText,e);o(t,i,e.response)})),e.open("GET",t.printable,!0),e.send()}}}},"./src/js/print.js":
/*!*************************!*\
  !*** ./src/js/print.js ***!
  \*************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e=n(/*! ./browser */"./src/js/browser.js"),r=n(/*! ./functions */"./src/js/functions.js");function o(t,i){try{if(t.focus(),e.default.isEdge()||e.default.isIE())try{t.contentWindow.document.execCommand("print",!1,null)}catch(i){t.contentWindow.print()}else t.contentWindow.print()}catch(t){i.onError(t)}finally{e.default.isFirefox()&&(t.style.visibility="hidden",t.style.left="-1px"),Object(r.cleanUp)(i)}}i.default={send:function(t,i){document.getElementsByTagName("body")[0].appendChild(i);var n=document.getElementById(t.frameId);n.onload=function(){if("pdf"!==t.type){var i=n.contentWindow||n.contentDocument;if(i.document&&(i=i.document),i.body.appendChild(t.printableElement),"pdf"!==t.type&&t.style){var r=document.createElement("style");r.innerHTML=t.style,i.head.appendChild(r)}var s=i.getElementsByTagName("img");s.length>0?function(t){var i=t.map((function(t){if(t.src&&t.src!==window.location.href)return function(t){return new Promise((function(i){!function n(){t&&void 0!==t.naturalWidth&&0!==t.naturalWidth&&t.complete?i():setTimeout(n,500)}()}))}(t)}));return Promise.all(i)}(Array.from(s)).then((function(){return o(n,t)})):o(n,t)}else e.default.isFirefox()?setTimeout((function(){return o(n,t)}),1e3):o(n,t)}}}},"./src/js/raw-html.js":
/*!****************************!*\
  !*** ./src/js/raw-html.js ***!
  \****************************/
/*! exports provided: default */function(t,i,n){n.r(i);var e=n(/*! ./print */"./src/js/print.js");i.default={print:function(t,i){t.printableElement=document.createElement("div"),t.printableElement.setAttribute("style","width:100%"),t.printableElement.innerHTML=t.printable,e.default.send(t,i)}}},"./src/sass/index.scss":
/*!*****************************!*\
  !*** ./src/sass/index.scss ***!
  \*****************************/
/*! no static exports found */function(){},0:
/*!****************************!*\
  !*** multi ./src/index.js ***!
  \****************************/
/*! no static exports found */function(t,i,n){t.exports=n(/*! ./src/index.js */"./src/index.js")}}).default},t.exports=i()}($={path:undefined,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),$.exports));function ht(t){return t.substring(t.lastIndexOf("/")+1)}function ct(t,i){const n=getComputedStyle(t.canvas),{height:e,width:r}=t.canvas;t.fillStyle=n.getPropertyValue("--secondary-color"),t.fillRect(0,0,r,e),t.fillStyle=n.getPropertyValue("--primary-text-color"),t.textAlign="center",t.fillText(i,r/2,e/2)}const lt=class{constructor(i){t(this,i),this.src="",this.fitToScreen=!1,this.email=!0,this.initialColor="#827397",this.isBucketToolMode=!0,this.emailDialogVisibility=!1,this.imageLoading=!1,this.currentColor=this.initialColor,this.alpha=1,this.updateOriginalCanvas=()=>{this.context.globalAlpha=this.alpha,this.context.drawImage(this.overlayCanvas,0,0),this.cfd.storeSnapshot(),this.contextOverlay.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height),this.context.globalAlpha=1},this.updateOverlay=t=>{const i=this.element.shadowRoot.querySelector("#canvas-overlay");i.id="canvas-overlay",i.height=t.height,i.width=t.width,this.overlayCanvas=i,this.contextOverlay=i.getContext("2d"),this.cfdOverlay=new ot({canvas:i,lineWidth:5,bucketMode:!1,strokeColor:this.currentColor,onDrawingStopFn:this.updateOriginalCanvas}),this.overlayCanvas.style.display="none"},this.renderCanvas=(t,i,n)=>{this.imageLoading=!0,ct(this.context,"Loading..."),async function(t,i,n,e=!1){return async function(t){return new Promise(((i,n)=>{const e=new Image;e.onload=()=>i(e),e.onerror=()=>n("Unable to load image."),e.crossOrigin="anonymous",e.src=t}))}(i).then((i=>{!function(t,i,n,e=!1){const r=t.getContext("2d");i.width>n||e?(t.height=n/(i.width/i.height),t.width=n,r.drawImage(i,0,0,t.width,t.height)):(t.height=i.height,t.width=i.width,r.drawImage(i,0,0),r.drawImage(i,0,0))}(t,i,n,e)})).catch((t=>Promise.reject(t)))}(t,i,n,this.fitToScreen).then((()=>{this.cfd=new ot({canvas:this.canvas,lineWidth:5,bucketMode:this.isBucketToolMode,strokeColor:this.currentColor}),this.updateOverlay(t)})).catch((t=>{ct(this.context,t)})).finally((()=>{this.imageLoading=!1}))},this.onColorChange=t=>{this.cfd.setDrawingColor(t),this.cfdOverlay.setDrawingColor(t)},this.onBrushSelect=t=>{this.cfd&&(this.isBucketToolMode=!1,this.cfd.setBucketMode(!1),this.overlayCanvas.style.display="block",t.stopPropagation())},this.onBucketFillSelect=()=>{this.cfd&&(this.isBucketToolMode=!0,this.cfd.setBucketMode(!0),this.overlayCanvas.style.display="none")},this.redo=()=>{var t;null===(t=this.cfd)||void 0===t||t.redo()},this.undo=()=>{var t;null===(t=this.cfd)||void 0===t||t.undo()},this.showEmailDialog=t=>{this.emailDialogVisibility=t},this.onFileInput=async t=>async function(t){return new Promise(((i,n)=>{const e=t.target.files[0],r=new FileReader;r.onloadend=()=>i(r.result),r.onerror=()=>n("Unable to load image."),r.readAsDataURL(e)}))}(t).then((t=>(this.src=t,this.renderCanvas(this.canvas,t,this.clientWidth))))}brushSettingsChangeListener(t){var i;if(this.cfd){const{width:n,alpha:e}=t.detail;this.cfd.setLineWidth(+n),null===(i=this.cfdOverlay)||void 0===i||i.setLineWidth(+n),this.overlayCanvas.style.opacity=e,this.alpha=+e}}cardIconClickListener(t){"Brush Settings"===t.detail&&this.onBrushSelect(t)}componentDidLoad(){const t=this.element.shadowRoot.getElementById("canvas-main"),i=t.getContext("2d");this.canvas=t,this.context=i,this.clientWidth=this.element.shadowRoot.querySelector(".drawing").clientWidth,this.src&&this.renderCanvas(t,this.src,this.clientWidth),a.add("canvas",this.canvas)}disconnectedCallback(){this.cfd=null,this.cfdOverlay=null}render(){return n("div",{class:"drawing"},n("nav",null,n("pixobe-color-picker",{changeListener:this.onColorChange,initialColor:this.currentColor}),n("div",null,n("action-card",{icon:"paintbrush",iconClass:this.isBucketToolMode?"":"active",cardTitle:"Brush Settings"},n("action-brush",null))),n("div",null,n("pixobe-icon",{icon:"fill",onClick:this.onBucketFillSelect,class:this.isBucketToolMode?"active":""})),n("pixobe-icon",{icon:"arrow-backward",onClick:this.undo}),n("pixobe-icon",{icon:"arrow-forward",onClick:this.redo})),n("section",{id:"drawing-area",class:{"animate-bg":this.imageLoading}},n("canvas",{id:"canvas-main"}),n("canvas",{id:"canvas-overlay"}),""===this.src?n("div",{class:"file-input"},n("input",{type:"file",onInput:this.onFileInput,id:"file",class:"custom-file",accept:"image/*"}),n("label",{htmlFor:"file"},n("div",null,n("pixobe-icon",{icon:"download"})),n("div",null,"Choose an image"))):n("div",null)),n("footer",null,n("pixobe-icon",{icon:"print",onClick:()=>{return t=this.appName,void at({printable:this.canvas.toDataURL(),type:"image",imageStyle:"width:100%",documentTitle:t});var t}}),n("pixobe-icon",{icon:"download",onClick:()=>function(t,i,n){console.log("src = ",i,"name=",ht(i));const e=n||ht(i);var r=document.createElement("a");r.download=e,r.href=t.toDataURL(),r.click()}(this.canvas,this.src,this.appName)}),this.email&&n("action-card",{icon:"envelope",cardTitle:"Mail"},n("action-email",{endpoint:this.emailService}))))}get element(){return r(this)}};lt.style=":host{--primary-color:var(--primary-color-coloring, #363062);--secondary-color:var(--main-bg-color-coloring, #4d4c7d);--primary-text-color:var(--primary-text-coloring, #e9d5da);--secondary-text-color:var(--secondary-text-color-coloring, #e6ba95);--card-header-color:var(--card-header-color-coloring, #2b264e);--card-bg-color:var(--card-bg-color-coloring, #f9f9f9);--animation-opacity:0.6;color:var(--primary-text-color)}nav,footer{display:flex;justify-content:center;gap:20px;margin:10px 0;width:100%}.drawing{font-family:'Monospace', 'Sans-serif';background-color:var(--primary-color);display:grid;grid-template-columns:auto;justify-content:center;fill:var(--primary-text-color);margin:5px 0px;position:relative;min-height:200px}#drawing-area{position:relative}canvas{max-width:100%;min-height:200px;min-width:200px;touch-action:none}#canvas-main{background-color:var(--tertiary-color)}#canvas-overlay{position:absolute;top:0;left:0}.custom-file{opacity:0;width:0.1px;height:0.1px;position:absolute}.file-input label{display:flex;flex-direction:column;gap:20px;background-color:var(--secondary-color);position:absolute;top:0;left:0;height:100%;width:100%;justify-content:center;align-items:center;border:1px dashed var(--primary-text-color)}.animate-bg{animation:animate-gradient 1s linear infinite}@-webkit-keyframes animate-gradient{50%{opacity:var(--animation-opacity)}}@-moz-keyframes animate-gradient{50%{opacity:var(--animation-opacity)}}@keyframes animate-gradient{50%{opacity:var(--animation-opacity)}}";const ut={fill:'<g id="fill"><path d="M13 14.5c0.468-2.207 0.985-4.050 1.604-5.846 0.411 1.796 0.928 3.638 1.337 5.521 0.059 1.153-0.612 1.825-1.441 1.825s-1.5-0.672-1.5-1.5z"></path><path d="M8 1l-1.44 1.44-2-2c-0.276-0.262-0.649-0.423-1.060-0.423s-0.784 0.161-1.061 0.423c-0.27 0.271-0.438 0.645-0.438 1.059s0.168 0.789 0.439 1.060l2 2-4.44 4.44 7 7 8-8zM8 2.41l5.59 5.59h-11.18l2.75-2.75c0.071 0.042 0.156 0.067 0.247 0.067 0.271 0 0.49-0.219 0.49-0.49 0-0.091-0.025-0.176-0.068-0.249l0.721-0.718 1.54 1.53c0.091 0.091 0.216 0.147 0.355 0.147 0.277 0 0.502-0.225 0.502-0.502 0-0.139-0.056-0.264-0.147-0.355l-1.53-1.53zM3.15 1.85c-0.091-0.091-0.148-0.216-0.148-0.355s0.057-0.264 0.148-0.355c0.092-0.089 0.217-0.144 0.355-0.144s0.263 0.055 0.355 0.144l2 2-0.71 0.71z"></path></g>',paintbrush:'<g id="paintbrush"><path d="M5.6 11.6l-1.2-1.2c-0.8-0.2-2-0.1-2.7 1-0.8 1.1-0.3 2.8-1.7 4.6 0 0 3.5 0 4.8-1.3 1.2-1.2 1.2-2.2 1-3l-0.2-0.1z"></path><path d="M5.8 8.1c-0.2 0.3-0.5 0.7-0.7 1 0 0.2-0.1 0.3-0.2 0.4l1.5 1.5c0.1-0.1 0.3-0.2 0.4-0.3 0.3-0.2 0.7-0.4 1-0.7 0.4 0 0.6-0.2 0.8-0.4l-2.2-2.2c-0.2 0.2-0.4 0.4-0.6 0.7z"></path><path d="M15.8 0.2c-0.3-0.3-0.7-0.3-1-0.1 0 0-3 2.5-5.9 5.1-0.4 0.4-0.7 0.7-1.1 1-0.2 0.2-0.4 0.4-0.6 0.5l2.1 2.1c0.2-0.2 0.4-0.4 0.5-0.7 0.3-0.4 0.6-0.7 0.9-1.1 2.5-3 5.1-5.9 5.1-5.9 0.3-0.2 0.3-0.6 0-0.9z"></path></g>',print:'<g id="print"><path d="M0 10v4h2v2h12v-2h2v-4h-16zM13 15h-10v-3h10v3z"></path><path d="M12 6v-4l-2.7-2h-5.3v6h-4v3h16v-3h-4zM9 1l1.3 1h-1.3v-1zM11 7h-6v-6h3v2h3v4zM15 8h-1v-1h1v1z"></path></g>',download:'<g id="download"><path d="M16 10h-5.5l-2.5 2.5-2.5-2.5h-5.5v6h16v-6zM4 14h-2v-2h2v2z"></path><path d="M10 6v-6h-4v6h-3l5 5 5-5z"></path></g>',envelope:'<g id="envelope"><path d="M0 3h16v2.4l-8 4-8-4z"></path><path d="M0 14l5.5-4.8 2.5 1.4 2.5-1.4 5.5 4.8z"></path><path d="M4.6 8.8l-4.6-2.3v6.5z"></path><path d="M11.4 8.8l4.6-2.3v6.5z"></path></g>',"arrow-forward":'<g id="arrow-forward"><path d="M16 7.9l-6-4.9v3c-0.5 0-1.1 0-2 0-8 0-8 8-8 8s1-4 7.8-4c1.1 0 1.8 0 2.2 0v2.9l6-5z"></path></g>',"arrow-backward":'<g id="arrow-backward"><path d="M0 7.9l6-4.9v3c0 0 1.1 0 2 0 8 0 8 8 8 8s-1-4-7.8-4c-1.1 0-1.8 0-2.2 0v2.9l-6-5z"></path></g>',"close-small":'<g id="close-small"><path d="M12.96 4.46l-1.42-1.42-3.54 3.55-3.54-3.55-1.42 1.42 3.55 3.54-3.55 3.54 1.42 1.42 3.54-3.55 3.54 3.55 1.42-1.42-3.55-3.54 3.55-3.54z"></path></g>'},dt=class{constructor(i){t(this,i)}componentDidLoad(){this.element.shadowRoot.querySelector("svg").innerHTML=ut[this.icon]}render(){return n(e,null,n("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",preserveAspectRatio:"xMidYMid meet","aria-hidden":"true"}))}get element(){return r(this)}};dt.style=":host{display:block;height:24px;width:24px}:host(.active){fill:var(--secondary-text-color)}";export{o as action_brush,s as action_card,h as action_email,c as pixobe_color_picker,lt as pixobe_coloring_book,dt as pixobe_icon}